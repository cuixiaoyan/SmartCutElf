# 视频白屏问题修复

## 问题

视频开头出现白屏或花屏。

## 原因

使用 `-c copy` 快速剪辑时，剪辑点不在关键帧（I-frame）上，导致播放器无法正确解码。

## 解决方案

### 重新编码（推荐）

```python
# 修改前
cmd = ['-i', video_path, '-ss', str(start), '-to', str(end), '-c', 'copy', '-y', output_path]

# 修改后
cmd = [
    '-ss', str(start),      # 先定位
    '-i', video_path,
    '-t', str(end - start), # 使用持续时间
    '-c:v', 'libx264',      # 重新编码
    '-preset', 'fast',      # 编码速度
    '-crf', '23',           # 质量控制
    '-c:a', 'aac',          # 音频编码
    '-b:a', '192k',         # 音频比特率
    '-movflags', '+faststart',  # 优化播放
    '-y', output_path
]
```

## 参数说明

| 参数 | 说明 | 可选值 |
|------|------|--------|
| `-preset` | 编码速度 | ultrafast/fast/medium/slow |
| `-crf` | 质量控制 | 18(高质量)/23(推荐)/28(可接受) |
| `-b:a` | 音频比特率 | 128k/192k/256k |

## 配置建议

**平衡模式（推荐）：**
```python
-preset fast -crf 23 -b:a 192k
```

**速度优先：**
```python
-preset ultrafast -crf 28 -b:a 128k
```

**质量优先：**
```python
-preset slow -crf 18 -b:a 256k
```
