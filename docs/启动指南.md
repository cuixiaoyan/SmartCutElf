# SmartCutElf 启动指南

## 📋 前置要求

- Python 3.8 或更高版本
- FFmpeg（必须安装）
- 8GB+ 内存（推荐）

## 🔧 安装步骤

### 1. 安装Python依赖

在项目根目录运行：

```bash
pip install -r requirements.txt
```

如果安装较慢，可以使用国内镜像源：

```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 2. 安装FFmpeg（必须）

#### Windows:
1. 下载FFmpeg: https://github.com/BtbN/FFmpeg-Builds/releases
2. 下载 `ffmpeg-master-latest-win64-gpl.zip`
3. 解压到任意目录，例如 `C:\ffmpeg`
4. 添加到系统环境变量PATH:
   - 右键"此电脑" → "属性" → "高级系统设置" → "环境变量"
   - 在"系统变量"中找到"Path"，点击"编辑"
   - 添加FFmpeg的bin目录，例如 `C:\ffmpeg\bin`
5. 重启命令行，运行 `ffmpeg -version` 验证安装

#### macOS:
```bash
brew install ffmpeg
```

#### Linux (Ubuntu/Debian):
```bash
sudo apt update
sudo apt install ffmpeg
```

### 3. 验证FFmpeg安装

打开命令行，运行：
```bash
ffmpeg -version
ffprobe -version
```

如果能看到版本信息，说明安装成功。

## ▶️ 启动应用

在项目根目录运行：

```bash
python main.py
```

## 🎯 使用流程

1. **打开文件夹**: 点击"📁 打开文件夹"按钮，选择包含视频的文件夹
2. **查看列表**: 左侧会显示扫描到的所有视频文件
3. **开始处理**: 点击"▶️ 开始处理"按钮开始自动剪辑
4. **查看进度**: 右侧会显示处理进度和状态信息
5. **获取结果**: 处理完成后，在`output`目录查看剪辑后的视频

## ⚙️ 配置说明

可以编辑 `config.yaml` 文件来自定义设置：

- `processing.target_duration_min`: 目标最小时长（秒，默认180=3分钟）
- `processing.target_duration_max`: 目标最大时长（秒，默认300=5分钟）
- `highlight.audio_weight`: 音频权重（默认0.4）
- `highlight.video_weight`: 视频权重（默认0.4）
- `subtitle.enabled`: 是否生成字幕（默认true）
- `ui.theme`: 界面主题（dark/light）

## 🐛 常见问题

### 问题1: 提示找不到FFmpeg
**解决方案**: 确保FFmpeg已正确安装并添加到PATH环境变量

### 问题2: ModuleNotFoundError
**解决方案**: 确保已安装所有依赖
```bash
pip install -r requirements.txt
```

### 问题3: Whisper模型下载慢
**解决方案**: 
- 首次运行会自动下载Whisper模型（约140MB for base model）
- 耐心等待，或预先下载模型文件
- 可以在`config.yaml`中修改`speech.recognition_model`为更小的`tiny`模型

### 问题4: 内存不足
**解决方案**: 
- 减少`processing.max_workers`的值（默认4）
- 处理较小的视频文件
- 关闭其他占用内存的应用

### 问题5: PyQt5安装失败
**解决方案** (Windows):
```bash
pip install PyQt5 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 📝 开发模式

如果需要查看详细日志，打开 `logs/` 目录查看日志文件。

日志文件命名格式: `SmartCutElf_YYYYMMDD.log`

## 💡 提示

- 首次使用建议用较短的测试视频（1-2分钟）
- 视频文件越大，处理时间越长
- 支持的视频格式：MP4, AVI, MOV, MKV, WMV, FLV等
- 输出文件默认保存在 `output/` 目录
