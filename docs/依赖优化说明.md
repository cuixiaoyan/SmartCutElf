# SmartCutElf 依赖优化说明

## 核心依赖

### 必须保留的依赖
```
numpy>=1.21.0          # 数组计算、音频视频数据处理
opencv-python>=4.5.0   # 视频分析、场景检测
scipy>=1.7.0           # 音频信号处理（wavfile, signal）
PyQt5>=5.15.0          # GUI界面
pyyaml>=5.4.0          # 配置文件读取
psutil>=5.8.0          # 性能监控
openai-whisper         # 语音识别和字幕生成
```

### 已排除的依赖
```
pyttsx3                # 文本转语音（未使用）
torch                  # Whisper会自动下载
20+个PyQt5模块         # 不需要的功能模块
测试模块               # scipy.testing等
```

## 关键修复

### 1. scipy问题
- **问题**：build.py中错误排除了scipy主模块
- **影响**：audio_analyzer.py使用scipy.io.wavfile和scipy.signal
- **修复**：只排除scipy.testing，保留scipy主模块

### 2. pyttsx3未使用
- **问题**：text_to_speech.py存在但从未被调用
- **影响**：增加打包体积约20MB
- **修复**：已在build.py中排除

### 3. numpy.testing必须保留
- **问题**：排除后运行时报错"No module named 'numpy.testing'"
- **原因**：scipy等库会导入numpy.testing
- **修复**：保留numpy.testing模块

## 安装依赖

```bash
pip install -r requirements.txt
```

## 验证安装

```bash
python -c "import numpy, scipy, cv2, yaml, psutil, whisper; print('✅ 所有依赖已安装')"
```
