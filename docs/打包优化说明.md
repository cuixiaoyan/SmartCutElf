# SmartCutElf 打包优化说明

## 快速开始

```bash
# 打包（约40秒）
python scripts\build.py

# 或使用批处理（推荐）
快速打包.bat
```

## 优化效果

| 指标 | 优化前 | 优化后 | 提升 |
|------|--------|--------|------|
| 打包时间 | 18-30分钟 | 40秒-1分钟 | **20-40倍** |
| 输出体积 | 800MB-3GB | 420MB | **减少60-85%** |

## 核心优化策略

### 1. 使用onedir模式
- onefile模式：10-30分钟
- onedir模式：40秒-1分钟
- **提速：20-40倍**

### 2. 排除torch
- torch约1GB，打包很慢
- Whisper首次运行时自动下载
- **减少1GB，提速50%**

### 3. 排除不需要的PyQt5模块
- 排除20+个不使用的模块
- **减少100MB**

### 4. 排除测试模块
- scipy.testing、torch.testing等
- **减少50MB**

## 注意事项

### 不能排除的模块
- ❌ `numpy.testing` - scipy会导入
- ❌ `scipy` 主模块 - 项目使用
- ❌ `PyQt5` 核心模块

### 可以安全排除的模块
- ✅ `pyttsx3` - 未使用
- ✅ `torch` - Whisper自动下载
- ✅ `scipy.testing` - 测试模块
- ✅ PyQt5.QtWebEngine等20+模块

## 打包说明

当前使用onedir模式（文件夹形式），打包速度快，约40秒完成。

如需单文件exe，可修改`scripts\build.py`添加`--onefile`参数，但打包时间会增加到5-10分钟。
